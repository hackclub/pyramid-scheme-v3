<% content_for :title, "Shop Items" %>

<div class="flex justify-between items-center mb-8">
  <div>
    <h1 class="text-3xl font-bold tracking-tight text-foreground">Shop Items</h1>
    <p class="text-sm text-muted-foreground mt-2">Manage all shop products and inventory.</p>
  </div>
  <%= link_to "Add New Item", new_admin_shop_item_path, class: "inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 transition-colors" %>
</div>

<div class="rounded-lg border border-border bg-card shadow-sm">
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="border-b border-border">
        <tr class="text-left">
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground">Item</th>
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground">Category</th>
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground">Price</th>
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground">Stock</th>
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground">Status</th>
          <th class="px-6 py-3 text-sm font-medium text-muted-foreground"></th>
        </tr>
      </thead>
      <tbody class="divide-y divide-border">
        <% @shop_items.each do |item| %>
          <tr class="hover:bg-muted/50 transition-colors">
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <% if item.image_url.present? %>
                  <%= image_tag item.image_url, class: "w-12 h-12 rounded object-cover" %>
                <% end %>
                <div>
                  <div class="font-medium text-foreground"><%= item.name %></div>
                  <div class="text-xs text-muted-foreground"><%= truncate(item.description, length: 50) %></div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 text-sm text-foreground"><%= item.category || 'Uncategorized' %></td>
            <td class="px-6 py-4 text-sm text-foreground font-medium"><%= item.price_shards %> shards</td>
            <td class="px-6 py-4 text-sm">
              <% if item.unlimited_stock? %>
                <span class="text-green-500">Unlimited</span>
              <% elsif item.stock_quantity && item.stock_quantity > 0 %>
                <span class="text-foreground"><%= item.stock_quantity %></span>
              <% else %>
                <span class="text-destructive">Out of stock</span>
              <% end %>
            </td>
            <td class="px-6 py-4">
              <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium <%= item.active? ? 'bg-green-500/10 text-green-500' : 'bg-muted text-muted-foreground' %>">
                <%= item.active? ? 'Active' : 'Inactive' %>
              </span>
            </td>
            <td class="px-6 py-4 text-sm">
              <div class="flex gap-2">
                <%= link_to "Edit", edit_admin_shop_item_path(item), class: "text-primary hover:underline font-medium" %>
                <%= button_to "Delete", admin_shop_item_path(item), method: :delete, data: { confirm: "Are you sure?" }, class: "text-red-500 hover:text-red-400 hover:underline font-medium" %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <% if @shop_items.empty? %>
    <div class="text-center py-12">
      <p class="text-sm text-muted-foreground">No shop items found.</p>
    </div>
  <% end %>
</div>
