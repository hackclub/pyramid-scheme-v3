<% content_for :title, "Video Submissions" %>

<div class="space-y-6">
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-bold">Video Submissions</h1>
  </div>

  <%# Status tabs %>
  <div class="flex gap-2 border-b border-border pb-2">
    <% Admin::VideoSubmissionsController::STATUSES.each do |s| %>
      <%= link_to s.humanize,
          admin_video_submissions_path(status: s),
          class: "px-4 py-2 rounded-t-lg text-sm font-medium transition-colors #{@status == s ? 'bg-card text-foreground border-b-2 border-primary' : 'text-muted-foreground hover:text-foreground'}" %>
    <% end %>
  </div>

  <% if @submissions.any? %>
    <div class="bg-card rounded-lg border border-border overflow-hidden">
      <table class="w-full">
        <thead class="bg-muted/50">
          <tr>
            <th class="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">User</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Campaign</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">URL/Files</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Submitted</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-border">
          <% @submissions.each do |submission| %>
            <tr class="hover:bg-muted/30">
              <td class="px-4 py-3">
                <%= link_to submission.user.display_name, admin_user_path(submission.user), class: "text-primary hover:underline font-medium" %>
                <div class="text-xs text-muted-foreground"><%= submission.user.email %></div>
              </td>
              <td class="px-4 py-3 text-sm"><%= submission.campaign.name %></td>
              <td class="px-4 py-3 text-sm">
                <% if submission.video_url.present? %>
                  <span class="text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded">URL</span>
                <% end %>
                <% if submission.video_files.attached? %>
                  <span class="text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded"><%= submission.video_files.count %> file(s)</span>
                <% end %>
              </td>
              <td class="px-4 py-3 text-sm text-muted-foreground"><%= time_ago_in_words(submission.created_at) %> ago</td>
              <td class="px-4 py-3">
                <%= link_to "Review", admin_video_submission_path(submission), class: "text-sm text-primary hover:underline font-medium" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <%== pagy_nav(@pagy) if @pagy.pages > 1 %>
  <% else %>
    <div class="text-center py-12 bg-card rounded-lg border border-border">
      <p class="text-muted-foreground">No <%= @status %> video submissions.</p>
    </div>
  <% end %>
</div>
